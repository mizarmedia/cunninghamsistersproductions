<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resilience | A Cunningham Sisters Production</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://player.vimeo.com/api/player.js"></script>
</head>
<body>
    <!-- Fixed Navigation -->
    <nav class="nav">
        <a href="#" class="nav-logo">THE CUNNINGHAM SISTERS</a>
        <button class="menu-toggle" aria-label="Toggle menu" onclick="document.querySelector('.nav-links').classList.toggle('active')">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="nav-links">
            <a href="#story">Story</a>
            <a href="#team">Team</a>
            <a href="#impact">Impact</a>
            <a href="https://gofund.me/d00b98309" target="_blank" class="nav-cta">Support</a>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero" id="hero">
        <div class="hero-bg">
            <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/21511353-880c-4223-90da-7017955f64cb/resiliencebts-104.jpg" alt="Resilience">
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <p class="hero-pre">The Cunningham Sisters Productions Presents</p>
            <h1 class="hero-title">RESILIENCE</h1>
            <p class="hero-tagline">Some truths demand to be told.</p>
            <a href="#story" class="hero-scroll">
                <span>Discover the Story</span>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M12 5v14M5 12l7 7 7-7"/>
                </svg>
            </a>
        </div>
    </section>

    <!-- Quote Interstitial -->
    <section class="interstitial">
        <blockquote>
            "If we don't stand up for the children... then we don't stand up for much."
        </blockquote>
        <cite>Marian W. Edelman</cite>
    </section>

    <!-- Story Section -->
    <section class="story" id="story">
        <div class="story-bg parallax">
            <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/adec2c06-e582-4dd3-9fec-3f95c9c42749/resiliencebts-170.jpg" alt="Behind the scenes">
        </div>
        <div class="story-content">
            <div class="story-text">
                <span class="overline">The Film</span>
                <h2>A story that needs to be heard</h2>
                <p class="lead">Resilience is a gritty, unflinching drama that exposes the systemic abuse within unregulated teen residential treatment programs.</p>
                <p>Inspired by real events, this non-profit narrative feature follows young people trapped in an industry that has operated in the shadows for too long. Their stories of survival and courage shine light on practices that demand immediate reform.</p>
                <div class="story-meta">
                    <div class="meta-item">
                        <span class="meta-label">Director</span>
                        <span class="meta-value">Kenna Cunningham</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Writer</span>
                        <span class="meta-value">Madi Grace Cunningham</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Genre</span>
                        <span class="meta-value">Drama</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Status</span>
                        <span class="meta-value">Post-Production</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Break -->
    <section class="image-break">
        <div class="image-grid">
            <div class="image-item">
                <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/d491d93f-a845-40de-903f-c10dd1652204/000119550019.jpg" alt="Production still">
            </div>
            <div class="image-item">
                <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/f18d316e-b93b-4656-82a1-995d0cb4540e/ENG00327.jpeg" alt="Production still">
            </div>
            <div class="image-item">
                <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/b479c1d5-fec1-4298-81f5-6c2eb04e0a23/resiliencebts.jpg" alt="Behind the scenes">
            </div>
        </div>
    </section>

    <!-- Video Section -->
    <section class="video-section" id="watch">
        <div class="video-content">
            <span class="overline">Proof of Concept</span>
            <h2>Watch</h2>
            <div class="video-wrapper">
                <div class="video-container">
                    <iframe
                        src="https://player.vimeo.com/video/1115004786?background=1&dnt=1&playsinline=1"
                        allow="autoplay; fullscreen; picture-in-picture"
                        allowfullscreen
                        playsinline
                        webkit-playsinline>
                    </iframe>
                </div>
                <!-- Small Unmute Button -->
                <button class="unmute-hint" aria-label="Unmute">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                        <line x1="23" y1="9" x2="17" y2="15"/>
                        <line x1="17" y1="9" x2="23" y2="15"/>
                    </svg>
                </button>
                <!-- Custom Video Controls -->
                <div class="video-controls">
                    <button class="video-btn play-btn" aria-label="Play video">
                        <svg class="icon-play" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        <svg class="icon-pause" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                        </svg>
                    </button>
                    <div class="video-progress">
                        <div class="video-progress-bar"></div>
                    </div>
                    <span class="video-time">0:00</span>
                    <button class="video-btn mute-btn" aria-label="Unmute video">
                        <svg class="icon-muted" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                            <line x1="23" y1="9" x2="17" y2="15"/>
                            <line x1="17" y1="9" x2="23" y2="15"/>
                        </svg>
                        <svg class="icon-unmuted" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
                            <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        </svg>
                    </button>
                    <button class="video-btn fullscreen-btn" aria-label="Fullscreen">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section class="team" id="team">
        <div class="team-header">
            <span class="overline">The Filmmakers</span>
            <h2>Voices Behind the Vision</h2>
        </div>

        <div class="team-spotlight">
            <div class="spotlight-image">
                <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/bdeddbbb-b09c-4722-bb46-8b68e28fb7d1/WindReck_Boston_39-Edit-2+%281%29.jpg" alt="Kenna Cunningham">
            </div>
            <div class="spotlight-content">
                <h3>Kenna Cunningham</h3>
                <span class="role">Director / Producer</span>
                <p>Kenna began her journey at age 16 through The Film Institute apprenticeship, progressing to first assistant directing and line producing. With credits spanning Netflix, Apple TV, Amazon Prime, and National Geographic, Resilience marks her powerful directorial debut.</p>
                <a href="https://www.imdb.com/name/nm12095838/" target="_blank" class="spotlight-imdb">View Kenna's filmography →</a>
            </div>
        </div>

        <div class="team-spotlight reverse">
            <div class="spotlight-image">
                <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/b7915715-d835-4b42-a7cd-5ea496b82473/Screen+Shot+2023-11-25+at+9.36.44+AM.png" alt="Madi Grace Cunningham">
            </div>
            <div class="spotlight-content">
                <h3>Madi Grace Cunningham</h3>
                <span class="role">Writer / Actor / Producer</span>
                <p>From acting in ABC's Kevin Costner presents: The First Christmas, to assistant writing in a Fox series (to be released in 2026), Madi Grace has a range of both on and off screen experience in the industry that infuses Resilience with authentic emotional power.</p>
                <a href="https://www.imdb.com/name/nm2420805/" target="_blank" class="spotlight-imdb">View Madi's filmography →</a>
            </div>
        </div>

        <div class="team-grid">
            <div class="team-card" data-person="david">
                <div class="team-card-photo">
                    <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/e1bce53a-2f08-4460-8065-2c7193f817ad/MV5BMTkyNzQxNTY2OF5BMl5BanBnXkFtZTgwNTE1ODI4ODE%40._V1_SY1000_CR007961000_AL_.jpg" alt="David Cunningham">
                </div>
                <div class="team-card-body">
                    <h4>David Cunningham</h4>
                    <span class="team-card-role">Producer</span>
                    <p class="team-card-teaser">20+ years with Fox, Disney, ABC. Founded Global Virtual Studios.</p>
                    <div class="team-card-expanded">
                        <p>Filmmaker with over 20 years of experience who has directed major productions for Fox, Disney, and ABC, plus independent features across 50+ countries. He founded multiple creative companies including Global Virtual Studios and focuses on media campaigns addressing indigenous rights, human trafficking, and orphans with special needs.</p>
                        <a href="https://www.imdb.com/name/nm0192289/" target="_blank" class="team-card-imdb">View David's filmography →</a>
                    </div>
                    <span class="team-card-indicator">Read more →</span>
                </div>
            </div>
            <div class="team-card" data-person="mike">
                <div class="team-card-photo">
                    <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/333a0bdb-d486-4781-8c58-f846a33c10c4/mike.jpg" alt="Mike Leahy">
                </div>
                <div class="team-card-body">
                    <h4>Mike Leahy</h4>
                    <span class="team-card-role">Producer</span>
                    <p class="team-card-teaser">Co-founder NEO Art & Logic. 30+ feature films.</p>
                    <div class="team-card-expanded">
                        <p>Co-founding producer of NEO Art & Logic, a production company serving studios and distributors like Miramax and Disney. NEO produced 30 feature films including 5 franchises featuring actors like Viggo Mortensen and Christopher Walken. Since leaving NEO, he has produced eight additional feature films across various genres.</p>
                        <a href="https://www.imdb.com/name/nm0494999/" target="_blank" class="team-card-imdb">View Mike's filmography →</a>
                    </div>
                    <span class="team-card-indicator">Read more →</span>
                </div>
            </div>
            <div class="team-card" data-person="janet">
                <div class="team-card-photo">
                    <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/3f05b433-e252-4901-a347-39fd68bea38b/40ba43ae-0570-4c86-ab4b-bd982629724c.png" alt="Janet Batchler">
                </div>
                <div class="team-card-body">
                    <h4>Janet Batchler</h4>
                    <span class="team-card-role">Advisor</span>
                    <p class="team-card-teaser">Writer, Batman Forever. USC Professor.</p>
                    <div class="team-card-expanded">
                        <p>Co-writer (with Lee Batchler) of Batman Forever, Smoke and Mirrors, and Pompeii. She serves as associate professor at USC's School of Cinematic Arts teaching screenwriting. Recent projects include Jack and Dick and Midnight Ride (for Disney). The Batchlers were executive producers on Running For Grace through Hawaii's Film Accelerator Program.</p>
                        <a href="https://www.imdb.com/name/nm0060761/" target="_blank" class="team-card-imdb">View Janet's filmography →</a>
                    </div>
                    <span class="team-card-indicator">Read more →</span>
                </div>
            </div>
            <div class="team-card" data-person="lee">
                <div class="team-card-photo">
                    <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/93e1df87-14dc-4720-a73f-49285095786c/Batman_Forever_-_Lee_Batchler+%281%29.webp" alt="Lee Batchler">
                </div>
                <div class="team-card-body">
                    <h4>Lee Batchler</h4>
                    <span class="team-card-role">Advisor</span>
                    <p class="team-card-teaser">Writer, Batman Forever & Pompeii.</p>
                    <div class="team-card-expanded">
                        <p>Screenwriter whose credits include Batman Forever, Smoke and Mirrors, and Pompeii, among many other projects. Recent works are Jack and Dick and Midnight Ride (Disney/Johnny Depp). Served as executive producer and advisor on Running For Grace through Hawaii's Film Accelerator Program.</p>
                        <a href="https://www.imdb.com/name/nm0060760/" target="_blank" class="team-card-imdb">View Lee's filmography →</a>
                    </div>
                    <span class="team-card-indicator">Read more →</span>
                </div>
            </div>
        </div>
        <div class="team-grid-overlay"></div>

        <!-- Team Modal -->
        <div class="team-modal">
            <div class="team-modal-content">
                <button class="team-modal-close">×</button>
                <div class="team-modal-photo"></div>
                <div class="team-modal-body">
                    <h4></h4>
                    <span class="team-modal-role"></span>
                    <p class="team-modal-bio"></p>
                    <a class="team-modal-imdb" target="_blank"></a>
                </div>
            </div>
        </div>
    </section>

    <!-- Impact Section -->
    <section class="impact" id="impact">
        <div class="impact-bg parallax">
            <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/0a1aadcb-ec64-43ed-b562-15cf858764a9/000119550030.jpg" alt="Production">
        </div>
        <div class="impact-content">
            <span class="overline">Our Mission</span>
            <h2>Film as a Force for Change</h2>
            <p class="lead">Every dollar creates impact beyond the screen.</p>

            <div class="impact-model">
                <div class="impact-split">
                    <div class="split-number">50%</div>
                    <div class="split-text">
                        <h4>Advocacy</h4>
                        <p>Funds initiatives to regulate troubled teen institutions and protect vulnerable youth.</p>
                    </div>
                </div>
                <div class="impact-split">
                    <div class="split-number">50%</div>
                    <div class="split-text">
                        <h4>Future Films</h4>
                        <p>Creates more advocacy films that expose injustice and drive systemic change.</p>
                    </div>
                </div>
            </div>

            <p class="tax-note">Tax-deductible through The Film Institute 501(c)(3)</p>
        </div>
    </section>

    <!-- Timeline Section -->
    <section class="timeline-section" id="journey">
        <div class="timeline-content">
            <span class="overline">Production Journey</span>
            <h2>The Path Forward</h2>
            <div class="timeline">
                <div class="timeline-item completed">
                    <div class="timeline-marker"></div>
                    <div class="timeline-info">
                        <h4>Creative Development</h4>
                        <p>Research, screenplay, casting, creative vision</p>
                    </div>
                </div>
                <div class="timeline-item completed">
                    <div class="timeline-marker"></div>
                    <div class="timeline-info">
                        <h4>Funding & Strategy</h4>
                        <p>Legal structure, partnerships, budgeting</p>
                    </div>
                </div>
                <div class="timeline-item completed">
                    <div class="timeline-marker"></div>
                    <div class="timeline-info">
                        <h4>Production</h4>
                        <p>Principal photography wrapped April 2024</p>
                    </div>
                </div>
                <div class="timeline-item active">
                    <div class="timeline-marker"></div>
                    <div class="timeline-info">
                        <h4>Post-Production</h4>
                        <p>Picture lock, sound design, VFX, color</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-info">
                        <h4>Distribution</h4>
                        <p>Film festivals, theatrical, streaming</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Funding CTA -->
    <section class="funding">
        <div class="funding-content">
            <h2>Help Us Cross the Finish Line</h2>
            <p>We're in the final phase of post-production. Your support brings this story to the world.</p>

            <div class="funding-progress">
                <div class="progress-numbers">
                    <span class="current">$89,111</span>
                    <span class="goal">$150,000</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <span class="progress-percent">59% Funded</span>
            </div>

            <a href="https://gofund.me/d00b98309" target="_blank" class="btn-donate">
                <span>Support This Film</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </a>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
        <div class="newsletter-content">
            <span class="overline">Stay Updated</span>
            <h2>Join the Movement</h2>
            <p>Be the first to know about screenings, releases, and ways to help.</p>
            <form class="newsletter-form" action="#" method="post">
                <input type="email" name="email" placeholder="Your email address" required>
                <button type="submit">Subscribe</button>
            </form>
            <p class="newsletter-privacy">We respect your privacy.</p>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact">
        <div class="contact-content">
            <h3>Stay Connected</h3>
            <p>Follow our journey and be first to know about screenings.</p>
            <div class="contact-links">
                <a href="mailto:filmresilience@gmail.com" class="contact-item">
                    <span class="contact-label">Email</span>
                    <span class="contact-value">filmresilience@gmail.com</span>
                </a>
                <a href="https://www.instagram.com/thecunninghamsisters/" target="_blank" class="contact-item">
                    <span class="contact-label">Instagram</span>
                    <span class="contact-value">@thecunninghamsisters</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <span class="footer-logo">CUNNINGHAM SISTERS PRODUCTIONS</span>
            <p>&copy; 2026 All Rights Reserved</p>
        </div>
    </footer>

    <!-- Theater Mode Exit Hint -->
    <div class="theater-exit-hint">Scroll to exit theater mode</div>

    <script>
        // Fixed parallax effect - relative to each section
        function updateParallax() {
            document.querySelectorAll('.parallax').forEach(container => {
                const rect = container.getBoundingClientRect();
                const windowHeight = window.innerHeight;

                // Only apply when section is in view
                if (rect.bottom > 0 && rect.top < windowHeight) {
                    const img = container.querySelector('img');
                    if (img) {
                        // Calculate how far through the viewport the section is
                        const scrollProgress = (windowHeight - rect.top) / (windowHeight + rect.height);
                        // Limit parallax to reasonable range (-30px to +30px)
                        const offset = (scrollProgress - 0.5) * 60;
                        img.style.transform = `translateY(${offset}px)`;
                    }
                }
            });
        }

        window.addEventListener('scroll', updateParallax);
        window.addEventListener('resize', updateParallax);
        updateParallax();

        // Nav background on scroll
        const nav = document.querySelector('.nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Smooth scroll with nav offset
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const navHeight = document.querySelector('.nav').offsetHeight;
                    const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - navHeight;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Close mobile menu on link click
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                document.querySelector('.nav-links').classList.remove('active');
            });
        });

        // ============================================
        // Theater Mode for Video Section
        // ============================================
        const videoSection = document.querySelector('.video-section');
        let theaterMode = false;
        let theaterCooldown = false;
        let scrollLocked = false;
        let scrollAccumulator = 0;
        let vimeoPlayer = null;
        let isPlaying = false;
        let isMuted = true;
        const ESCAPE_THRESHOLD = 500;

        // Custom control elements
        const playBtn = document.querySelector('.play-btn');
        const muteBtn = document.querySelector('.mute-btn');
        const fullscreenBtn = document.querySelector('.fullscreen-btn');
        const progressBar = document.querySelector('.video-progress-bar');
        const progressContainer = document.querySelector('.video-progress');
        const timeDisplay = document.querySelector('.video-time');
        const iconPlay = document.querySelector('.icon-play');
        const iconPause = document.querySelector('.icon-pause');
        const iconMuted = document.querySelector('.icon-muted');
        const iconUnmuted = document.querySelector('.icon-unmuted');
        const unmuteHint = document.querySelector('.unmute-hint');
        const videoControls = document.querySelector('.video-controls');

        // Initialize Vimeo Player
        function initVimeoPlayer() {
            const iframe = document.querySelector('.video-container iframe');
            if (iframe) {
                vimeoPlayer = new Vimeo.Player(iframe);

                // Update progress bar
                vimeoPlayer.on('timeupdate', (data) => {
                    const percent = (data.seconds / data.duration) * 100;
                    progressBar.style.width = percent + '%';
                    timeDisplay.textContent = formatTime(data.seconds);
                });

                // Sync play state
                vimeoPlayer.on('play', () => {
                    isPlaying = true;
                    iconPlay.style.display = 'none';
                    iconPause.style.display = 'block';
                });

                vimeoPlayer.on('pause', () => {
                    isPlaying = false;
                    iconPlay.style.display = 'block';
                    iconPause.style.display = 'none';
                });
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        function enterTheaterMode() {
            if (theaterMode || theaterCooldown) return;
            theaterMode = true;
            scrollLocked = true;

            // Hard lock: prevent ALL scrolling (iOS needs both html and body)
            document.documentElement.style.overflow = 'hidden';
            document.body.style.overflow = 'hidden';
            document.body.classList.add('theater-mode');

            videoSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // Show unmute hint, hide controls until unmuted
            unmuteHint.classList.add('visible');
            videoControls.classList.remove('revealed');

            if (vimeoPlayer) {
                vimeoPlayer.setMuted(true);
                isMuted = true;
                iconMuted.style.display = 'block';
                iconUnmuted.style.display = 'none';
                vimeoPlayer.play();
            }

            // Wait for animation to complete before allowing escape attempts
            scrollAccumulator = 0;
            setTimeout(() => {
                scrollAccumulator = 0;
                scrollLocked = false; // Now allow escape attempts
            }, 1000);
        }

        function exitTheaterMode() {
            theaterMode = false;
            scrollLocked = false;
            scrollAccumulator = 0;

            // Restore scrolling (both html and body for iOS)
            document.documentElement.style.overflow = '';
            document.body.style.overflow = '';
            document.body.classList.remove('theater-mode');

            // Hide unmute hint and controls
            unmuteHint.classList.remove('visible');
            videoControls.classList.remove('revealed');

            if (vimeoPlayer) {
                vimeoPlayer.pause();
                vimeoPlayer.setMuted(true);
                isMuted = true;
                iconMuted.style.display = 'block';
                iconUnmuted.style.display = 'none';
            }

            theaterCooldown = true;
            setTimeout(() => { theaterCooldown = false; }, 2000);
        }

        // Unmute hint click handler
        unmuteHint.addEventListener('click', () => {
            if (!vimeoPlayer) return;
            isMuted = false;
            vimeoPlayer.setMuted(false);
            iconMuted.style.display = 'none';
            iconUnmuted.style.display = 'block';
            unmuteHint.classList.remove('visible');
            videoControls.classList.add('revealed');
        });

        // Play/Pause button
        playBtn.addEventListener('click', () => {
            if (!vimeoPlayer) return;
            if (isPlaying) {
                vimeoPlayer.pause();
            } else {
                vimeoPlayer.play();
            }
        });

        // Mute/Unmute button
        muteBtn.addEventListener('click', () => {
            if (!vimeoPlayer) return;
            isMuted = !isMuted;
            vimeoPlayer.setMuted(isMuted);
            iconMuted.style.display = isMuted ? 'block' : 'none';
            iconUnmuted.style.display = isMuted ? 'none' : 'block';
        });

        // Fullscreen button
        fullscreenBtn.addEventListener('click', () => {
            const wrapper = document.querySelector('.video-wrapper');
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                wrapper.requestFullscreen();
            }
        });

        // Click on progress bar to seek
        progressContainer.addEventListener('click', (e) => {
            if (!vimeoPlayer) return;
            const rect = progressContainer.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            vimeoPlayer.getDuration().then((duration) => {
                vimeoPlayer.setCurrentTime(percent * duration);
            });
        });

        // Detect scroll into video section
        const videoObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                    enterTheaterMode();
                }
            });
        }, { threshold: [0.5] });

        videoObserver.observe(videoSection);

        // Handle escape scrolling (wheel events)
        window.addEventListener('wheel', (e) => {
            if (!theaterMode) return;

            // During lock period, block everything
            if (scrollLocked) {
                e.preventDefault();
                return;
            }

            scrollAccumulator += Math.abs(e.deltaY);

            if (scrollAccumulator > ESCAPE_THRESHOLD) {
                exitTheaterMode();
            } else {
                e.preventDefault();
            }
        }, { passive: false });

        // Touch support for mobile
        let touchStartY = 0;
        window.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
        });

        window.addEventListener('touchmove', (e) => {
            if (!theaterMode) return;

            // During lock period, block everything
            if (scrollLocked) {
                e.preventDefault();
                return;
            }

            const touchDelta = Math.abs(e.touches[0].clientY - touchStartY);
            scrollAccumulator += touchDelta * 0.5;

            if (scrollAccumulator > ESCAPE_THRESHOLD) {
                exitTheaterMode();
            } else {
                e.preventDefault();
            }
        }, { passive: false });

        // Escape key also exits theater mode
        window.addEventListener('keydown', (e) => {
            if (theaterMode && e.key === 'Escape') {
                exitTheaterMode();
            }
        });

        // Initialize Vimeo player on page load
        document.addEventListener('DOMContentLoaded', initVimeoPlayer);

        // ============================================
        // Team Card Modal
        // ============================================
        const teamModal = document.querySelector('.team-modal');
        const teamOverlay = document.querySelector('.team-grid-overlay');

        // Team card click → show modal
        document.querySelectorAll('.team-card[data-person]').forEach(card => {
            card.addEventListener('click', () => {
                // Get card data
                const photo = card.querySelector('.team-card-photo img').cloneNode();
                const name = card.querySelector('h4').textContent;
                const role = card.querySelector('.team-card-role').textContent;
                const bio = card.querySelector('.team-card-expanded p').innerHTML;
                const imdbLink = card.querySelector('.team-card-imdb');

                // Populate modal
                teamModal.querySelector('.team-modal-photo').innerHTML = '';
                teamModal.querySelector('.team-modal-photo').appendChild(photo);
                teamModal.querySelector('.team-modal-body h4').textContent = name;
                teamModal.querySelector('.team-modal-role').textContent = role;
                teamModal.querySelector('.team-modal-bio').innerHTML = bio;

                const modalImdb = teamModal.querySelector('.team-modal-imdb');
                if (imdbLink) {
                    modalImdb.href = imdbLink.href;
                    modalImdb.textContent = imdbLink.textContent;
                    modalImdb.style.display = 'inline-block';
                } else {
                    modalImdb.style.display = 'none';
                }

                // Show modal + overlay
                teamModal.classList.add('active');
                teamOverlay.classList.add('active');
            });
        });

        // Close modal function
        function closeTeamModal() {
            teamModal.classList.remove('active');
            teamOverlay.classList.remove('active');
        }

        // Close modal on X button click
        document.querySelector('.team-modal-close').addEventListener('click', closeTeamModal);

        // Close modal on overlay click
        teamOverlay.addEventListener('click', closeTeamModal);

        // Close modal when clicking outside the content box (on the modal backdrop)
        teamModal.addEventListener('click', (e) => {
            if (e.target === teamModal) {
                closeTeamModal();
            }
        });

        // Close modal on Escape key
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && teamModal.classList.contains('active')) {
                closeTeamModal();
            }
        });

        // ============================================
        // Impact Section - Floating Effect
        // ============================================
        const impactSection = document.querySelector('.impact');
        const impactBoxes = document.querySelectorAll('.impact-split');
        const hoveredBoxes = new Set();

        // Only enable on non-touch devices
        if (window.matchMedia('(hover: hover)').matches) {
            // Track which boxes are being directly hovered
            impactBoxes.forEach(box => {
                box.addEventListener('mouseenter', () => {
                    hoveredBoxes.add(box);
                    box.style.transform = 'scale(1.03)';
                });

                box.addEventListener('mouseleave', () => {
                    hoveredBoxes.delete(box);
                });
            });

            // Section-wide mouse tracking - each box reacts to mouse relative to itself
            impactSection.addEventListener('mousemove', (e) => {
                impactBoxes.forEach(box => {
                    if (hoveredBoxes.has(box)) return; // Skip hovered boxes

                    const rect = box.getBoundingClientRect();
                    const boxCenterX = rect.left + rect.width / 2;
                    const boxCenterY = rect.top + rect.height / 2;

                    // How far is mouse from this box's center
                    const distX = e.clientX - boxCenterX;
                    const distY = e.clientY - boxCenterY;

                    // Normalize and apply movement (box shifts toward mouse)
                    const x = (distX / 200) * 10;
                    const y = (distY / 200) * 6;
                    box.style.transform = `translate(${x}px, ${y}px)`;
                });
            });

            // Reset when leaving section
            impactSection.addEventListener('mouseleave', () => {
                impactBoxes.forEach(box => {
                    if (!hoveredBoxes.has(box)) {
                        box.style.transform = '';
                    }
                });
            });
        }
    </script>
</body>
</html>

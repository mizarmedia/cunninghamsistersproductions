<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Plan | Cunningham Sisters Productions</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Fixed Navigation -->
    <nav class="nav">
        <a href="index.html" class="nav-logo">THE CUNNINGHAM SISTERS</a>
        <button class="menu-toggle" aria-label="Toggle menu" onclick="document.querySelector('.nav-links').classList.toggle('active')">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="nav-links">
            <a href="index.html">Resilience</a>
            <a href="the-plan.html" class="active">The Plan</a>
            <a href="mailto:filmresilience@gmail.com">Contact</a>
            <a href="https://gofund.me/d00b98309" target="_blank" class="nav-cta">Support</a>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero hero-short" id="hero">
        <div class="hero-bg">
            <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/d491d93f-a845-40de-903f-c10dd1652204/000119550019.jpg" alt="Production still">
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <p class="hero-pre">The Cunningham Sisters Productions</p>
            <h1 class="hero-title">THE JOURNEY</h1>
            <p class="hero-tagline">From vision to screen: how independent film gets made.</p>
            <a href="#timeline" class="hero-scroll">
                <span>Explore the Process</span>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M12 5v14M5 12l7 7 7-7"/>
                </svg>
            </a>
        </div>
    </section>

    <!-- Production Timeline Section -->
    <section class="journey-section" id="timeline">
        <div class="journey-content">
            <span class="overline">Production Journey</span>
            <h2>Making Resilience</h2>
            <p class="journey-intro">Every film follows a path from idea to audience. Here's where Resilience stands on that journey.</p>

            <!-- Desktop Timeline (Horizontal) -->
            <div class="journey-timeline-horizontal">
                <div class="timeline-track">
                    <div class="timeline-progress-line"></div>
                </div>
                <div class="timeline-stages">
                    <div class="timeline-stage complete" data-stage="creative">
                        <div class="stage-bar"></div>
                        <div class="stage-marker"></div>
                        <div class="stage-label">
                            <h4>Creative Development</h4>
                            <span class="stage-duration">6 months</span>
                        </div>
                    </div>
                    <div class="timeline-stage complete" data-stage="funding">
                        <div class="stage-bar"></div>
                        <div class="stage-marker"></div>
                        <div class="stage-label">
                            <h4>Funding & Strategy</h4>
                            <span class="stage-duration">6 months</span>
                        </div>
                    </div>
                    <div class="timeline-stage complete" data-stage="production">
                        <div class="stage-bar"></div>
                        <div class="stage-marker"></div>
                        <div class="stage-label">
                            <h4>Production</h4>
                            <span class="stage-duration">3 months</span>
                        </div>
                    </div>
                    <div class="timeline-stage active" data-stage="post">
                        <div class="stage-bar"></div>
                        <div class="stage-marker"></div>
                        <div class="stage-label">
                            <h4>Post-Production</h4>
                            <span class="stage-duration">8 months</span>
                        </div>
                    </div>
                    <div class="timeline-stage upcoming" data-stage="distribution">
                        <div class="stage-bar"></div>
                        <div class="stage-marker"></div>
                        <div class="stage-label">
                            <h4>Marketing & Distribution</h4>
                            <span class="stage-duration">10-12 months</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Timeline (Vertical) -->
            <div class="journey-timeline-vertical">
                <div class="vtimeline-item complete" data-stage="creative">
                    <div class="vtimeline-marker"></div>
                    <div class="vtimeline-content">
                        <h4>Creative Development</h4>
                        <span class="vtimeline-duration">6 months</span>
                        <p>Research, screenplay, casting, creative vision</p>
                    </div>
                </div>
                <div class="vtimeline-item complete" data-stage="funding">
                    <div class="vtimeline-marker"></div>
                    <div class="vtimeline-content">
                        <h4>Funding & Strategy</h4>
                        <span class="vtimeline-duration">6 months</span>
                        <p>Legal structure, partnerships, budgeting</p>
                    </div>
                </div>
                <div class="vtimeline-item complete" data-stage="production">
                    <div class="vtimeline-marker"></div>
                    <div class="vtimeline-content">
                        <h4>Production</h4>
                        <span class="vtimeline-duration">3 months</span>
                        <p>Principal photography wrapped April 2024</p>
                    </div>
                </div>
                <div class="vtimeline-item active" data-stage="post">
                    <div class="vtimeline-marker"></div>
                    <div class="vtimeline-content">
                        <h4>Post-Production</h4>
                        <span class="vtimeline-duration">8 months</span>
                        <p>Picture lock, sound design, VFX, color</p>
                        <div class="vtimeline-substages">
                            <div class="substage complete">
                                <span class="substage-marker"></span>
                                <span>Pencil Edit</span>
                            </div>
                            <div class="substage complete">
                                <span class="substage-marker"></span>
                                <span>Directors/Editors Cut</span>
                            </div>
                            <div class="substage current">
                                <span class="substage-marker"></span>
                                <span>Producers Cut through Delivery</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="vtimeline-item upcoming" data-stage="distribution">
                    <div class="vtimeline-marker"></div>
                    <div class="vtimeline-content">
                        <h4>Marketing & Distribution</h4>
                        <span class="vtimeline-duration">10-12 months</span>
                        <p>Festivals, premieres, streaming</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stage Modal -->
    <div class="stage-modal">
        <div class="stage-modal-content">
            <button class="stage-modal-close">&times;</button>
            <div class="stage-modal-header">
                <span class="stage-modal-status"></span>
                <h3 class="stage-modal-title"></h3>
                <p class="stage-modal-duration"></p>
            </div>
            <div class="stage-modal-body">
                <div class="stage-modal-what">
                    <h5>What It Is</h5>
                    <p></p>
                </div>
                <div class="stage-modal-activities">
                    <h5>Key Activities</h5>
                    <ul></ul>
                </div>
                <div class="stage-modal-team">
                    <h5>Who's Involved</h5>
                    <p></p>
                </div>
                <div class="stage-modal-deliverables">
                    <h5>Deliverables</h5>
                    <p></p>
                </div>
                <div class="stage-modal-substages"></div>
            </div>
        </div>
    </div>
    <div class="stage-modal-overlay"></div>

    <!-- Budget Section -->
    <section class="budget-section" id="budget">
        <div class="budget-content">
            <span class="overline">Budget Breakdown</span>
            <h2>Where Your Dollar Goes</h2>
            <p class="budget-intro">Transparency matters. Here's how the $150,000 budget is allocated to bring Resilience to life.</p>

            <div class="budget-visualization">
                <div class="budget-chart-wrapper">
                    <svg class="budget-chart" viewBox="0 0 200 200">
                        <!-- Production 47% -->
                        <circle class="budget-segment" data-category="production" data-amount="$70,000" data-percent="47%" cx="100" cy="100" r="80" stroke-dasharray="236.31 266.92" stroke-dashoffset="0" transform="rotate(-90 100 100)"></circle>
                        <!-- Marketing 27% -->
                        <circle class="budget-segment" data-category="marketing" data-amount="$40,000" data-percent="27%" cx="100" cy="100" r="80" stroke-dasharray="135.72 367.51" stroke-dashoffset="-236.31" transform="rotate(-90 100 100)"></circle>
                        <!-- Post-Production 23% -->
                        <circle class="budget-segment" data-category="post-production" data-amount="$35,000" data-percent="23%" cx="100" cy="100" r="80" stroke-dasharray="115.61 387.62" stroke-dashoffset="-372.03" transform="rotate(-90 100 100)"></circle>
                        <!-- Other 3% -->
                        <circle class="budget-segment" data-category="other" data-amount="$5,000" data-percent="3%" cx="100" cy="100" r="80" stroke-dasharray="15.08 488.15" stroke-dashoffset="-487.64" transform="rotate(-90 100 100)"></circle>
                        <!-- Center circle for donut effect -->
                        <circle cx="100" cy="100" r="50" fill="var(--color-dark)"></circle>
                        <!-- Center text -->
                        <text x="100" y="95" class="budget-center-amount">$150K</text>
                        <text x="100" y="112" class="budget-center-label">Total Budget</text>
                    </svg>
                </div>

                <div class="budget-legend">
                    <div class="legend-item" data-category="production">
                        <span class="legend-color production"></span>
                        <div class="legend-text">
                            <h5>Production</h5>
                            <span class="legend-amount">$70,000</span>
                            <span class="legend-percent">47%</span>
                        </div>
                    </div>
                    <div class="legend-item" data-category="marketing">
                        <span class="legend-color marketing"></span>
                        <div class="legend-text">
                            <h5>Marketing & Distribution</h5>
                            <span class="legend-amount">$40,000</span>
                            <span class="legend-percent">27%</span>
                        </div>
                    </div>
                    <div class="legend-item" data-category="post-production">
                        <span class="legend-color post-production"></span>
                        <div class="legend-text">
                            <h5>Post-Production</h5>
                            <span class="legend-amount">$35,000</span>
                            <span class="legend-percent">23%</span>
                        </div>
                    </div>
                    <div class="legend-item" data-category="other">
                        <span class="legend-color other"></span>
                        <div class="legend-text">
                            <h5>Legal & Admin</h5>
                            <span class="legend-amount">$5,000</span>
                            <span class="legend-percent">3%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Revenue Model Section -->
    <section class="revenue-section" id="revenue">
        <div class="revenue-bg parallax">
            <img src="https://images.squarespace-cdn.com/content/v1/68ba6cf9482a7b1252fcd276/b479c1d5-fec1-4298-81f5-6c2eb04e0a23/resiliencebts.jpg" alt="Behind the scenes">
        </div>
        <div class="revenue-content">
            <span class="overline">The Ripple Effect</span>
            <h2>Your Investment Multiplies</h2>
            <p class="lead">Film revenue flows back into the mission, creating an engine for lasting change.</p>

            <!-- Single Animated Infographic -->
            <div class="impact-cycle">
                <svg class="cycle-svg" viewBox="0 0 400 320" preserveAspectRatio="xMidYMid meet">
                    <!-- Central Film Circle -->
                    <circle class="cycle-center" cx="200" cy="140" r="50" />
                    <text x="200" y="135" class="cycle-center-text">THE</text>
                    <text x="200" y="155" class="cycle-center-text">FILM</text>

                    <!-- Donation Flow Path (top) -->
                    <path class="cycle-path donation-path" d="M200,30 L200,90" />
                    <circle class="cycle-node donation-node" cx="200" cy="30" r="24" />
                    <text x="200" y="35" class="cycle-node-icon">$</text>

                    <!-- Revenue Flow Path (splits from bottom) -->
                    <path class="cycle-path revenue-path" d="M200,190 L200,240" />

                    <!-- Split paths -->
                    <path class="cycle-path split-left" d="M200,240 Q200,260 140,280 L80,300" />
                    <path class="cycle-path split-right" d="M200,240 Q200,260 260,280 L320,300" />

                    <!-- Circular return arrow (from Future Films back to Film) -->
                    <path class="cycle-path return-path" d="M340,280 Q380,200 340,120 Q300,60 230,90" marker-end="url(#arrowhead)" />

                    <!-- Arrowhead marker -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-gold)" />
                        </marker>
                    </defs>

                    <!-- Advocacy Node (left) -->
                    <circle class="cycle-node advocacy-node" cx="60" cy="300" r="24" />
                    <text x="60" y="305" class="cycle-node-icon-small">50%</text>

                    <!-- Future Films Node (right) -->
                    <circle class="cycle-node future-node" cx="340" cy="300" r="24" />
                    <text x="340" y="305" class="cycle-node-icon-small">50%</text>

                    <!-- Animated pulse dots -->
                    <circle class="pulse-dot donation-pulse" cx="200" cy="60" r="4" />
                    <circle class="pulse-dot revenue-pulse" cx="200" cy="220" r="4" />
                    <circle class="pulse-dot return-pulse" cx="340" cy="200" r="4" />
                </svg>

                <!-- Labels below SVG -->
                <div class="cycle-labels">
                    <div class="cycle-label donation-label">
                        <h4>Your Donation</h4>
                        <p>501(c)(3) tax-deductible</p>
                    </div>
                    <div class="cycle-label advocacy-label">
                        <h4>Advocacy</h4>
                        <p>Regulating troubled teen programs</p>
                    </div>
                    <div class="cycle-label future-label">
                        <h4>Future Films</h4>
                        <p>More stories, more impact</p>
                    </div>
                </div>
            </div>

            <p class="cycle-tagline">The cycle continues with every film we make.</p>
            <p class="tax-note">All donations are tax-deductible through The Film Institute 501(c)(3)</p>
        </div>
    </section>

    <!-- CTA Hub - Newsletter, Donate, Instagram -->
    <section class="cta-hub">
        <div class="cta-grid">
            <!-- Newsletter Card -->
            <div class="cta-card cta-newsletter">
                <span class="overline">Stay Updated</span>
                <h3>Join the Movement</h3>
                <p>Be the first to know about screenings, releases, and ways to help.</p>
                <form class="newsletter-form" action="#" method="post">
                    <input type="email" name="EMAIL" placeholder="Your email address" required>
                    <button type="submit">Subscribe</button>
                </form>
                <p class="newsletter-privacy">We respect your privacy. Unsubscribe anytime.</p>
            </div>

            <!-- Donate Card -->
            <div class="cta-card cta-donate">
                <span class="overline">Support the Film</span>
                <h3>Help Us Finish</h3>
                <p>We're in the final phase of post-production.</p>
                <div class="funding-progress">
                    <div class="progress-numbers">
                        <span class="current">$89,111</span>
                        <span class="goal">$150,000</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="progress-percent">59% Funded</span>
                </div>
                <a href="https://gofund.me/d00b98309" target="_blank" class="btn-donate">
                    <span>Donate Now</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>

            <!-- Instagram Card -->
            <div class="cta-card cta-instagram">
                <span class="overline">Follow Our Journey</span>
                <h3>@thecunninghamsisters</h3>
                <p>Behind the scenes, updates, and more.</p>
                <div class="instagram-embed-placeholder">
                    <a href="https://www.instagram.com/thecunninghamsisters/" target="_blank" class="instagram-link">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                        </svg>
                        <span>View on Instagram</span>
                    </a>
                    <p class="embed-note">Instagram feed coming soon</p>
                </div>
            </div>
        </div>

        <!-- Contact Info -->
        <div class="cta-contact">
            <a href="mailto:filmresilience@gmail.com" class="contact-link">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                </svg>
                filmresilience@gmail.com
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <span class="footer-logo">THE CUNNINGHAM SISTERS PRODUCTIONS</span>
            <p class="footer-copyright">&copy; 2026 All Rights Reserved</p>
            <p class="footer-credit">Designed by <a href="https://alohamediastudio.com" target="_blank">Aloha Media Studio</a></p>
        </div>
    </footer>

    <script>
        // Nav background on scroll
        const nav = document.querySelector('.nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Smooth scroll with nav offset
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const navHeight = document.querySelector('.nav').offsetHeight;
                    const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - navHeight;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Close mobile menu on link click
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                document.querySelector('.nav-links').classList.remove('active');
            });
        });

        // Parallax effect for revenue section
        function updateParallax() {
            document.querySelectorAll('.parallax').forEach(container => {
                const rect = container.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                if (rect.bottom > 0 && rect.top < windowHeight) {
                    const img = container.querySelector('img');
                    if (img) {
                        const scrollProgress = (windowHeight - rect.top) / (windowHeight + rect.height);
                        const offset = (scrollProgress - 0.5) * 60;
                        img.style.transform = `translateY(${offset}px)`;
                    }
                }
            });
        }
        window.addEventListener('scroll', updateParallax);
        window.addEventListener('resize', updateParallax);
        updateParallax();

        // ============================================
        // Stage Modal Data
        // ============================================
        const stageData = {
            creative: {
                title: 'Creative Development',
                duration: '6 months',
                status: 'Complete',
                what: 'The foundation where ideas become a blueprint. This phase transforms a concept into a production-ready plan.',
                activities: [
                    'In-depth research on troubled teen industry',
                    'Screenplay development and revisions',
                    'Character design and development',
                    'Initial casting and talent outreach',
                    'Pitch deck and presentation materials',
                    'Creative vision documentation'
                ],
                team: 'Writers, director, producers, and research consultants',
                deliverables: 'Final screenplay, casting wish list, creative vision document, and pitch deck'
            },
            funding: {
                title: 'Funding & Strategy',
                duration: '6 months',
                status: 'Complete',
                what: 'Securing resources and building the operational foundation. This phase creates the legal and financial infrastructure needed to make the film.',
                activities: [
                    'Legal structuring and contracts',
                    'Budget development and refinement',
                    'Production scheduling',
                    'Location scouting and permits',
                    'Partnership development',
                    'Fundraising campaigns'
                ],
                team: 'Producers, legal counsel, location scouts, and financial advisors',
                deliverables: 'Legal entity, complete budget, production schedule, and funding commitments'
            },
            production: {
                title: 'Production',
                duration: '3 months',
                status: 'Complete',
                what: 'When cameras roll. This phase captures the performances and visuals that will become the final film.',
                activities: [
                    'Crew recruitment and department heads',
                    'Final casting decisions',
                    'Rehearsals with cast',
                    'Principal photography',
                    'Daily reviews and adjustments'
                ],
                team: 'Full cast and crew, director, cinematographer, and all production departments',
                deliverables: 'Raw footage, dailies, and production wrap (April 2024)'
            },
            post: {
                title: 'Post-Production',
                duration: '8 months',
                status: 'In Progress',
                what: 'Transforming raw footage into the final film. This phase shapes the story through editing, sound, music, and visual effects.',
                activities: [
                    'Assembly and rough cut editing',
                    'Sound design and mixing',
                    'Visual effects and color grading',
                    'Music composition and licensing',
                    'Final delivery preparation'
                ],
                team: 'Editor, director, sound designers, colorist, VFX artists, and composer',
                deliverables: 'Final picture lock, mixed audio, color-graded master, and delivery package',
                substages: [
                    { name: 'Pencil Edit', status: 'complete', description: 'First rough assembly of footage (2 months)' },
                    { name: 'Directors/Editors Cut', status: 'complete', description: 'Refined storytelling and pacing (3 months)' },
                    { name: 'Producers Cut through Delivery', status: 'current', description: 'Final polish, sound, VFX, color (3 months)' }
                ]
            },
            distribution: {
                title: 'Marketing & Distribution',
                duration: '10-12 months',
                status: 'Upcoming',
                what: 'Getting the film to audiences and maximizing impact. This phase ensures the film reaches viewers and drives the advocacy mission.',
                activities: [
                    'Film festival submissions and strategy',
                    'Premiere planning and events',
                    'Social media campaigns',
                    'Distribution deal negotiations',
                    'Advocacy partnership integration',
                    'Press and publicity'
                ],
                team: 'Publicists, distributors, festival coordinators, and advocacy organizations',
                deliverables: 'Festival premieres, theatrical/digital distribution deals, and advocacy campaign integration'
            }
        };

        // ============================================
        // Stage Modal Functionality
        // ============================================
        const stageModal = document.querySelector('.stage-modal');
        const stageOverlay = document.querySelector('.stage-modal-overlay');
        const allStages = document.querySelectorAll('[data-stage]');

        function openStageModal(stageKey) {
            const data = stageData[stageKey];
            if (!data) return;

            // Populate modal
            stageModal.querySelector('.stage-modal-status').textContent = data.status;
            stageModal.querySelector('.stage-modal-status').className = 'stage-modal-status ' + data.status.toLowerCase().replace(' ', '-');
            stageModal.querySelector('.stage-modal-title').textContent = data.title;
            stageModal.querySelector('.stage-modal-duration').textContent = data.duration;
            stageModal.querySelector('.stage-modal-what p').textContent = data.what;

            // Activities list
            const activitiesList = stageModal.querySelector('.stage-modal-activities ul');
            activitiesList.innerHTML = data.activities.map(a => `<li>${a}</li>`).join('');

            stageModal.querySelector('.stage-modal-team p').textContent = data.team;
            stageModal.querySelector('.stage-modal-deliverables p').textContent = data.deliverables;

            // Substages (for post-production)
            const substagesContainer = stageModal.querySelector('.stage-modal-substages');
            if (data.substages) {
                substagesContainer.innerHTML = `
                    <h5>Current Progress</h5>
                    <div class="modal-substages">
                        ${data.substages.map(s => `
                            <div class="modal-substage ${s.status}">
                                <span class="modal-substage-marker"></span>
                                <div class="modal-substage-text">
                                    <strong>${s.name}</strong>
                                    <span>${s.description}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                substagesContainer.style.display = 'block';
            } else {
                substagesContainer.style.display = 'none';
            }

            // Show modal
            stageModal.classList.add('active');
            stageOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeStageModal() {
            stageModal.classList.remove('active');
            stageOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Click handlers for stages
        allStages.forEach(stage => {
            stage.addEventListener('click', () => {
                openStageModal(stage.dataset.stage);
            });
        });

        // Close modal handlers
        stageModal.querySelector('.stage-modal-close').addEventListener('click', closeStageModal);
        stageOverlay.addEventListener('click', closeStageModal);
        stageModal.addEventListener('click', (e) => {
            if (e.target === stageModal) closeStageModal();
        });
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && stageModal.classList.contains('active')) {
                closeStageModal();
            }
        });

        // ============================================
        // Budget Chart Interactivity
        // ============================================
        const budgetSegments = document.querySelectorAll('.budget-segment');
        const legendItems = document.querySelectorAll('.legend-item');
        const centerAmount = document.querySelector('.budget-center-amount');
        const centerLabel = document.querySelector('.budget-center-label');

        function highlightCategory(category) {
            // Highlight segment
            budgetSegments.forEach(seg => {
                if (seg.dataset.category === category) {
                    seg.classList.add('highlighted');
                } else {
                    seg.classList.add('dimmed');
                }
            });
            // Highlight legend
            legendItems.forEach(item => {
                if (item.dataset.category === category) {
                    item.classList.add('highlighted');
                } else {
                    item.classList.add('dimmed');
                }
            });
            // Update center text
            const segment = document.querySelector(`.budget-segment[data-category="${category}"]`);
            if (segment) {
                centerAmount.textContent = segment.dataset.amount;
                centerLabel.textContent = segment.dataset.percent;
            }
        }

        function resetHighlight() {
            budgetSegments.forEach(seg => {
                seg.classList.remove('highlighted', 'dimmed');
            });
            legendItems.forEach(item => {
                item.classList.remove('highlighted', 'dimmed');
            });
            centerAmount.textContent = '$150K';
            centerLabel.textContent = 'Total Budget';
        }

        // Segment hover
        budgetSegments.forEach(seg => {
            seg.addEventListener('mouseenter', () => highlightCategory(seg.dataset.category));
            seg.addEventListener('mouseleave', resetHighlight);
        });

        // Legend hover
        legendItems.forEach(item => {
            item.addEventListener('mouseenter', () => highlightCategory(item.dataset.category));
            item.addEventListener('mouseleave', resetHighlight);
        });

        // ============================================
        // Timeline Animation on Scroll
        // ============================================
        const journeySection = document.querySelector('.journey-section');
        const timelineProgressLine = document.querySelector('.timeline-progress-line');
        let hasAnimated = false;

        function animateTimeline() {
            if (hasAnimated) return;

            const rect = journeySection.getBoundingClientRect();
            const windowHeight = window.innerHeight;

            if (rect.top < windowHeight * 0.7) {
                hasAnimated = true;
                journeySection.classList.add('animate');
            }
        }

        window.addEventListener('scroll', animateTimeline);
        animateTimeline(); // Check on load

    </script>
</body>
</html>
